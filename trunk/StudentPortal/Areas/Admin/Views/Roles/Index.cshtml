@model IEnumerable<StudentPortal.Models.webpages_Roles>

@{
    ViewBag.Title = "Index";
	Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div class="row-fluid">
	<div class="span12">

		<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create", new { }, new {@class="btn blue" })

	<button class="btn green" id="roleUpdate">Update</button>
</p>
@(Html.Kendo().Grid<StudentPortal.Models.webpages_Roles>()
	.Name("webpages_Roles")
	.Columns(columns =>
	{
			columns.Bound(model => model.RoleName);
				columns.Bound(model => model.DisplayName);
		        columns.Command(command => {command.Custom("Edit").Click("Edit"); command.Custom("Delete").Click("Delete");});
	})
	.Groupable()
	.Pageable()
	.Sortable()
	.DataSource(
		dataSource => dataSource.Ajax()
			.Read(read => read.Action("Read", "Roles"))
	)
)

	</div>
</div>
<script type="text/javascript">
	$(document).ready(function () {
		$('#roleUpdate').click(function () {
			$.ajax({
				url: '@Url.Action("Update","Roles")',
				dataType: 'json',
				type: 'post',
				success: function (o) {
					alert(o.Message)
					$('#webpages_Roles').data("kendoGrid").dataSource.read();
				}
			})
		})
	})
	function Edit(e) {
		e.preventDefault();
		var dataItem = this.dataItem($(e.currentTarget).closest('tr'));
		location.href='@Url.Action("Edit","Roles")/'+dataItem.RoleId;
	}
	function Delete(e) {
		e.preventDefault();
		var dataItem = this.dataItem($(e.currentTarget).closest('tr'));
		location.href = '@Url.Action("Delete","Roles")/' + dataItem.RoleId;
	}
</script>
